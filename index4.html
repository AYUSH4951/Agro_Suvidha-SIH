<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Responsive Weather Dashboard</title>
  <!-- Lucide Icons CDN -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(to bottom right, #f0fdf4, #eff6ff, #f5f3ff);
      color: #333;
      padding-top: 70px; /* Prevent overlap with topbar */
    }

    .dashboard {
      min-height: 100vh;
    }

    /* ðŸ”¹ Top Navbar */
    .topbar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      height: 60px;
      background: #059669;
      color: #fff;
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 20px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      z-index: 1000;
      flex-wrap: wrap;
    }

    .topbar .logo {
      font-size: 25px;
      font-weight: bold;
    }

    .topbar .nav-buttons {
      display: flex;
      gap: 12px;
    }

    .topbar .nav-buttons button {
      background: transparent;
      border: none;
      color: #fff;
      font-weight: 500;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 6px;
      transition: background 0.2s ease;
      flex-wrap: wrap;
    }

    .topbar .nav-buttons button:hover {
      background: rgba(255,255,255,0.15);
    }

    /* Header */
    .header {
      background: linear-gradient(to right, #059669, #047857, #0f766e);
      color: white;
      padding: 1.5rem;
      border-bottom-left-radius: 2rem;
      border-bottom-right-radius: 2rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .title {
      font-size: 2rem;
      font-weight: bold;
    }

    .subtitle {
      opacity: 0.9;
    }

    .date {
      opacity: 0.75;
      font-size: 0.9rem;
      margin-top: 0.3rem;
    }

    .header-actions .icon-btn {
      background: rgba(255, 255, 255, 0.1);
      border: none;
      padding: 0.6rem;
      border-radius: 50%;
      margin-left: 0.5rem;
      cursor: pointer;
      color: white;
    }

    /* Weather Card - Updated to light blue and responsive */
    .weather-card {
      position: relative;
      margin: 1.5rem;
      padding: 1.5rem;
      border-radius: 1rem;
      background:rgba(18, 125, 212, 0.68);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
      color: #333;
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 1rem;
    }

    .weather-main {
      display: flex;
      gap: 1rem;
      align-items: center;
      flex: 1;
      min-width: 250px;
    }

    .weather-icon {
      background: linear-gradient(to right, #facc15, #f97316);
      padding: 1rem;
      border-radius: 50%;
      color: white;
      flex-shrink: 0;
    }

    .weather-info {
      flex: 1;
    }

    .temp-row {
      display: flex;
      align-items: center;
      gap: 0.6rem;
      flex-wrap: wrap;
    }

    .temperature {
      font-size: 2rem;
      font-weight: bold;
      color: #fdfdfe;
    }

    .badge {
      background: linear-gradient(to right, #facc15, #f97316);
      padding: 0.3rem 0.8rem;
      border-radius: 0.5rem;
      color: white;
      font-size: 0.8rem;
    }

    .weather-desc {
      font-size: 0.9rem;
      opacity: 0.9;
      color: #fbfbfb;
    }

    .weather-details {
      display: flex;
      flex-direction: column;
      justify-content: center;
      gap: 0.5rem;
      min-width: 150px;
    }

    .weather-details div {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: #f8f8f8;
    }

    /* Location inside weather card */
    .weather-card .location-detected {
      font-size: 1rem;
      margin-bottom: 0.8rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
      font-weight: 600;
      color: #f6f8f9;
      width: 100%;
    }

    /* Last updated moved to left side */
    .weather-card .last-updated {
      font-size: 0.8rem;
      margin-top: 1rem;
      text-align: left;
      color: #ffffff;
      width: 100%;
    }

    /* Responsive adjustments */
    @media (max-width: 768px) {
      .weather-card {
        flex-direction: column;
        align-items: flex-start;
      }
      
      .weather-main {
        width: 100%;
      }
      
      .weather-details {
        width: 100%;
        flex-direction: row;
        justify-content: space-around;
        border-top: 1px solid rgba(12, 74, 110, 0.2);
        padding-top: 1rem;
        margin-top: 0.5rem;
      }
    }

    @media (max-width: 480px) {
      .weather-details {
        flex-direction: column;
        gap: 0.8rem;
      }
      
      .weather-details div {
        justify-content: center;
      }
    }

    /* Highlight irrigation recommendation */
    .irrigation {
      background: rgba(249, 115, 22, 0.85);
      padding: 1rem;
      margin: 1.5rem;
      border-radius: 1rem;
      color: white;
      display: flex;
      align-items: center;
      gap: 0.8rem;
      font-weight: bold;
    }
    .irrigation i {
      width: 24px;
      height: 24px;
    }

    /* Services */
    .services {
      padding: 1.5rem;
      display: grid;
      grid-template-columns: 1fr;
      gap: 2rem;
    }

    @media (min-width: 768px) {
      .services {
        grid-template-columns: 1fr 1fr;
      }
    }

    .service-card {
      padding: 1.5rem;
      border-radius: 1rem;
      color: white;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
      transition: transform 0.3s ease;
    }

    .service-card:hover {
      transform: scale(1.02);
    }

    .service-card.red {
      background: linear-gradient(to bottom right, #f87171, #ec4899, #e11d48);
      box-shadow: 0 10px 20px rgba(220,38,38,0.25);
    }

    .service-card.green {
      background: linear-gradient(to bottom right, #34d399, #10b981, #0d9488);
      box-shadow: 0 10px 20px rgba(16,185,129,0.25);
    }

    .service-card.orange {
      background: linear-gradient(to bottom right, #fbbf24, #f97316, #dc2626);
      box-shadow: 0 10px 20px rgba(249,115,22,0.25);
    }

    .service-card.blue {
      background: linear-gradient(to bottom right, #60a5fa, #6366f1, #7c3aed);
      box-shadow: 0 10px 20px rgba(59,130,246,0.25);
    }

    .service-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .service-icon {
      background: rgba(255,255,255,0.2);
      padding: 0.8rem;
      border-radius: 1rem;
    }

    .service-title {
      font-size: 1.5rem;
      margin: 0.5rem 0;
    }

    .service-desc {
      opacity: 0.9;
      font-size: 0.9rem;
    }

    .features h4 {
      margin-top: 1rem;
      font-size: 0.8rem;
      text-transform: uppercase;
      opacity: 0.9;
    }

    .features ul {
      padding: 0;
      margin: 0.5rem 0;
      list-style: none;
    }

    .features li {
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .features li::before {
      content: "â€¢";
      color: white;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
      background: rgba(255,255,255,0.15);
      border-radius: 0.8rem;
      padding: 1rem;
      margin-top: 1rem;
    }

    .stats div {
      text-align: center;
      color: white;
    }

    .stats strong {
      font-size: 1.5rem;
      display: block;
    }

    .stats span {
      font-size: 0.8rem;
      opacity: 0.8;
    }

    .access-btn {
      width: 100%;
      margin-top: 1rem;
      padding: 0.8rem;
      border: none;
      border-radius: 0.8rem;
      background: rgba(255,255,255,0.2);
      color: white;
      font-size: 1rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .access-btn:hover {
      background: rgba(255,255,255,0.3);
    }

    .access-btn i {
      width: 20px;
      height: 20px;
      stroke: currentColor;
    }

    a {
      text-decoration: none;
      color: inherit;
    }

    .arrow {
      width: 24px;
      height: 24px;
      stroke: rgb(250, 249, 249);
    }
  </style>
</head>
<body>
  <div class="dashboard">
    
    <!-- ðŸ”¹ Top Navbar -->
    <div class="topbar">
      <div class="logo">Agro Suvidha</div>
      <div class="nav-buttons">
        <button>Home</button>
        <button onclick="window.location.href='index6.html'">Crops</button>
        <button onclick="window.location.href='index7.html'">Weather</button>
        <button onclick="window.location.href='about_us.html'">About Us</button>
      </div>
    </div>

    <!-- Header -->
    <header class="header">
      <div class="header-left">
        <h1 class="title">Welcome Back! ðŸŒ¾</h1>
        <p class="subtitle">Your personalized agricultural advisory dashboard</p>
        <p class="date">Wednesday, September 3</p>
      </div>
      <div class="header-actions">
        <button class="icon-btn"><i data-lucide="bell"></i></button>
        <button class="icon-btn"><i data-lucide="settings"></i></button>
      </div>
    </header>

    <!-- Dynamic Weather & Irrigation Card -->
    <div id="weather-dashboard">
      <!-- Weather Card -->
      <section class="weather-card" id="weather-card" style="display:none;">
        <div class="location-detected" id="location-msg">
          <i data-lucide="map-pin"></i> Detecting location...
        </div>

        <div class="weather-main">
          <div class="weather-icon">
            <i data-lucide="sun"></i>
          </div>
          <div class="weather-info">
            <div class="temp-row">
              <span class="temperature" id="temp">--Â°C</span>
              <span class="badge" id="condition">--</span>
            </div>
            <p class="weather-desc" id="desc">Fetching weather...</p>
          </div>
        </div>
        
        <div class="weather-details">
          <div><i data-lucide="wind"></i> <span id="wind">--</span></div>
          <div><i data-lucide="droplets"></i> <span id="humidity">--</span></div>
          <div><i data-lucide="cloud-rain"></i> <span id="rain">--</span></div>
        </div>
        
        <div class="last-updated" id="last-updated">Last updated: --</div>
      </section>

      <!-- Irrigation Recommendation -->
      <section class="irrigation" id="irrigation" style="display:none;">
        <i data-lucide="sprout"></i>
        <div><p id="irrigation-text">Loading...</p></div>
      </section>
    </div>

    <!-- Advisory Services -->
    <main class="services">
      <!-- Disease Solution -->
      <div class="service-card red">
        <div class="service-header">
          <div class="service-icon"><i data-lucide="stethoscope"></i></div>
          <a href="index5.html">
          <i data-lucide="chevron-right" class="arrow"></i>
          </a>
        </div>
        <h2 class="service-title">Disease Solution</h2>
        <p class="service-desc">AI-powered diagnosis and treatment for crop diseases</p>
        <div class="features">
          <h4>Key Features</h4>
          <ul>
            <li>Photo Diagnosis</li>
            <li>AI Analysis</li>
            <li>Treatment Plans</li>
          </ul>
        </div>
        <div class="stats">
          <div><strong>245</strong><span>Analyzed</span></div>
          <div><strong>12</strong><span>Pending</span></div>
        </div>
        <button class="access-btn" onclick="window.location.href='index5.html'">
          Access Disease Solution <i data-lucide="chevron-right"></i>
        </button>
      </div>

      <!-- Mandi Prices -->
      <div class="service-card green">
        <div class="service-header">
          <div class="service-icon"><i data-lucide="indian-rupee"></i></div>
          <a href="mandiprice.html">
            <i data-lucide="chevron-right" class="arrow"></i>
          </a>
        </div>
        <h2 class="service-title">Mandi Prices</h2>
        <p class="service-desc">Real-time market prices and trends analysis</p>
        <div class="features">
          <h4>Key Features</h4>
          <ul>
            <li>Live Prices</li>
            <li>Price Trends</li>
            <li>Market Analysis</li>
          </ul>
        </div>
        <div class="stats">
          <div><strong>150+</strong><span>Markets</span></div>
          <div><strong>Daily</strong><span>Updates</span></div>
        </div>
        <button class="access-btn" onclick="window.location.href='mandiprice.html'">
          Access Mandi Prices <i data-lucide="chevron-right"></i>
        </button>
      </div>

      <!-- Soil Quality & Fertilizer -->
      <div class="service-card orange">
        <div class="service-header">
          <div class="service-icon"><i data-lucide="flask-conical"></i></div>
          <a href="soil_health.html">
            <i data-lucide="chevron-right" class="arrow"></i>
          </a>
        </div>
        <h2 class="service-title">Soil Quality & Fertilizer</h2>
        <p class="service-desc">Soil analysis and customized fertilizer recommendations</p>
        <div class="features">
          <h4>Key Features</h4>
          <ul>
            <li>Soil Testing</li>
            <li>Nutrient Analysis</li>
            <li>Custom Recommendations</li>
          </ul>
        </div>
        <div class="stats">
          <div><strong>89</strong><span>Tests</span></div>
          <div><strong>25</strong><span>Recommended</span></div>
        </div>
        <button class="access-btn" onclick="window.location.href='soil_health.html'">
          Access Soil Quality <i data-lucide="chevron-right"></i>
        </button>
      </div>

      <!-- AI Assistant-->
      <div class="service-card blue">
        <div class="service-header">
          <div class="service-icon"><i data-lucide="bot"></i></div>
          <a href="AI_assistant.html">
            <i data-lucide="chevron-right" class="arrow"></i>
          </a>
        </div>
        <h2 class="service-title">Kisan Mitra</h2>
        <p class="service-desc">24/7 intelligent farming assistant with AI guidance</p>
        <div class="features">
          <h4>Key Features</h4>
          <ul>
            <li>Voice Assistant</li>
            <li>Smart Responses</li>
            <li>Multilingual Support</li>
          </ul>
        </div>
        <div class="stats">
          <div><strong>1,250</strong><span>Queries</span></div>
          <div><strong>95%</strong><span>Satisfaction</span></div>
        </div>
        <button class="access-btn" onclick="window.location.href='AI_assistant.html'">
          Access AI Assistant <i data-lucide="chevron-right"></i>
        </button>
      </div> 

    </main>
  </div>

  <script>
    const API_KEY = "b09b7ce916c2ae01a2510268790536d4"; 
    const CITY = "Siliguri"; // Replace with dynamic detection if needed

    async function fetchWeather() {
      try {
        const url = `https://api.openweathermap.org/data/2.5/weather?q=${CITY}&appid=${API_KEY}&units=metric`;
        const res = await fetch(url);
        const data = await res.json();

        document.getElementById("temp").innerText = `${data.main.temp}Â°C`;
        document.getElementById("condition").innerText = data.weather[0].main;
        document.getElementById("desc").innerText = data.weather[0].description;
        document.getElementById("wind").innerText = `${data.wind.speed} km/h`;
        document.getElementById("humidity").innerText = `${data.main.humidity}% humidity`;
        document.getElementById("rain").innerText = data.clouds.all + "% cloudiness";

        // Update last updated time inside weather card
        const now = new Date();
        document.getElementById("last-updated").innerText = "Last updated: " + now.toLocaleTimeString();

        // Irrigation logic
        let recommendation = "";
        if (data.main.humidity > 70 || data.clouds.all > 60) {
          recommendation = "No irrigation needed today, soil moisture is likely sufficient.";
        } else if (data.main.temp > 32 && data.main.humidity < 50) {
          recommendation = "Irrigation recommended: High temperature and low humidity may dry the soil.";
        } else if (data.clouds.all < 30 && data.main.temp > 28) {
          recommendation = "Light irrigation suggested to maintain crop health.";
        } else {
          recommendation = "Monitor soil moisture; irrigation may be needed if dryness persists.";
        }
        document.getElementById("irrigation-text").innerText = recommendation;

      } catch (error) {
        document.getElementById("irrigation-text").innerText = "Failed to fetch weather data.";
        console.error(error);
      }
    }

    // Sequence for showing sections
    setTimeout(() => {
      document.getElementById("location-msg").innerHTML = `<i data-lucide="map-pin"></i> Location detected: ${CITY}`;
      lucide.createIcons();
    }, 1000);

    setTimeout(() => {
      document.getElementById("weather-card").style.display = "flex";
      fetchWeather();
    }, 2000);

    setTimeout(() => {
      document.getElementById("irrigation").style.display = "flex";
    }, 3000);

    // Auto-refresh every 30 mins
    setInterval(fetchWeather, 1800000);

    lucide.createIcons();
  </script>
</body>

</html>


